@model IEnumerable<WebTinTuc.Article>

@{
    ViewBag.Title = "Trang Chủ";

    // LOGIC TÁCH TIN:
    // 1. Lấy bài mới nhất làm "Tin Nổi Bật" (Featured)
    var featureNews = Model != null ? Model.FirstOrDefault() : null;

    // 2. Lấy 3 bài tiếp theo làm "Tin Phụ" (Sub Stories)
    var subNews = Model != null ? Model.Skip(1).Take(3).ToList() : new List<WebTinTuc.Article>();
}

<!-- KHUNG BAO NGOÀI (Quan trọng: Class này set độ rộng 1000px như báo VnExpress) -->
<div class="content-container">

    <!-- PHẦN 1: TIN NỔI BẬT (Ảnh to bên trái, chữ bên phải) -->
    @if (featureNews != null)
    {
        <section class="featured-story">
            <div class="story-image">
                <a href="@Url.Action("Details", "Home", new { id = featureNews.ArticleID })">
                    <!-- Ảnh tin lớn (Có xử lý ảnh lỗi bằng ảnh mẫu) -->
                    <img src="@featureNews.ImageURL"
                         alt="@featureNews.Title"
                         onerror="this.src='https://via.placeholder.com/800x500?text=No+Image+Available'">
                </a>
            </div>

            <div class="story-content">
                <h1 class="story-title">
                    <a href="@Url.Action("Details", "Home", new { id = featureNews.ArticleID })">
                        @featureNews.Title
                    </a>
                </h1>

                <p class="story-sapo">
                    <!-- Giả lập Sapo (Đoạn trích dẫn) bằng cách lấy 250 ký tự đầu -->
                    @if (!string.IsNullOrEmpty(featureNews.Content) && featureNews.Content.Length > 250)
                    {
                        @featureNews.Content.Substring(0, 250)<span>...</span>
                    }
                    else
                    {
                        @featureNews.Content
                    }
                </p>
            </div>
        </section>
    }
    else
    {
        <!-- Thông báo nếu chưa có bài nào trong DB -->
        <div class="alert alert-warning text-center" style="margin: 20px;">
            <h3>Chưa có bài viết nào. Hãy vào trang Admin để đăng bài mới!</h3>
        </div>
    }

    <!-- Đường kẻ phân cách mờ -->
    <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">

    <!-- PHẦN 2: 3 TIN PHỤ BÊN DƯỚI (Xếp ngang hàng) -->
    @if (subNews.Any())
    {
        <section class="sub-stories-grid">
            @foreach (var item in subNews)
            {
                <article class="sub-story-item">
                    <a href="@Url.Action("Details", "Home", new { id = item.ArticleID })">
                        <img src="@item.ImageURL"
                             alt="@item.Title"
                             onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">
                    </a>
                    <h3>
                        <a href="@Url.Action("Details", "Home", new { id = item.ArticleID })">
                            <!-- Cắt ngắn tiêu đề nếu quá dài để không bị vỡ giao diện -->
                            @(item.Title.Length > 70 ? item.Title.Substring(0, 70) + "..." : item.Title)
                        </a>
                    </h3>
                </article>
            }
        </section>
    }
</div>